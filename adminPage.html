<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <!-- INCLUDE EXT JS -->
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <!-- ** CSS ** -->
        <!-- base library -->
        <link rel="stylesheet" type="text/css" href="javascript/extjs/resources/css/ext-all.css" />

        <!-- ** Javascript ** -->
        <script src="javascript/namespace.js" type="text/javascript" language="javascript" charset="utf-8"></script>
        <!-- ExtJS library: base/adapter -->
        <script type="text/javascript" src="javascript/extjs/ext-all-debug-w-comments.js"></script>

        <!-- page specific -->
        <script type="text/javascript">
            Ext.BLANK_IMAGE_URL = 'javascript/extjs/resources/themes/images/default/tree/s.gif';
            Ext.require([
                'Ext.form.*',
                'Ext.data.*'
            ]);
            Ext.onReady(function(){
                /*  Ext.regModel('Students', {
                    fields : [
                        {name : "studentName", type : "string"}
                    ]
                });

               Leaderboard.studentsModel = new Ext.create("Ext.data.Store", {
                    model : "Students",
                    proxy : {
                        type : "ajax",
                        url : Leaderboard.gateway
                    },
                    reader : {
                        type : 'json'
                    },
                    autoLoad : true,
                    handlers : {
                        load : function(store, data, suc) {
                            console.log(data);
                        }
                    }
                });
                 */
                Leaderboard.ajaxCall = function(parameters, succsess_callback, failure_callback) {
                    Ext.Ajax.request({
                        url : Leaderboard.gateway,
                        success : succsess_callback,
                        failure : failure_callback,
                        params : parameters
                    });
                };
                
                Leaderboard.addPointsForLecture = Ext.create('Ext.form.FormPanel', {
                    frame: true,
                    title: 'Points for lecture',
                    width: 350,
                    bodyPadding: 5,
                    renderTo : Ext.getBody(),
                    collapsible : true,
                    fieldDefaults: {
                        labelAlign: 'left',
                        labelWidth: 90,
                        anchor: '100%'
                    },

                    items: [{
                            xtype: 'textfield',
                            name: 'nameInput',
                            fieldLabel: 'Name',
                            queryMode: 'local',
                            displayField: 'studentName'
                        },{
                            xtype: 'numberfield',
                            name: 'pointsInput',
                            fieldLabel: 'Points',
                            value: 0.5,
                            step : 0.5,
                            minValue: 0,
                            maxValue: 50
                        }],
                    buttons : [
                        {
                            text : 'Submit',
                            handler : function() {
                                // do ajax here
                                var form = this.up("form").getForm();
                                console.log(form);
                                var succ = function(response) {
                                    x = Ext.decode(response.responseText);
                                    console.log(this);
                                    console.log(x);
                                }

                                Leaderboard.ajaxCall({foo : "bar"}, succ);
                                form.reset();
                            }
                        }
                    ]
                });

            });
        </script>
        <title>Add points</title>


    </head>

    <body>
    </body>
</html>
